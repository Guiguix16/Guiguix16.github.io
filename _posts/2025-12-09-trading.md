---
title: "Projet de Backtest et optimisation d'une stratégie de trading par algorithme génétique"
date: 2025-12-09 10:00:00 +0100
categories: [Projet étudiant]
tags: [Machine learning, Python]
description: "Pipeline complet pour backtest, optimisation et visualisation d’une stratégie de trading basée sur des EMA et un algorithme génétique."
image: /assets/Screen(2).png
---



# Projet de Backtest et optimisation d'une stratégie de trading par algorithme génétique

Ce projet propose un pipeline complet pour :

- Récupérer des données de marché via la librairie **ccxt** (Binance)  
- Construire une stratégie basée sur des **moyennes mobiles exponentielles (EMA)**  
- Optimiser les paramètres de la stratégie avec un **algorithme génétique**  
- Evaluer la robustesse grâce à une **validation croisée temporelle**  
- Comparer la stratégie à un simple **Buy & Hold**  
- Visualiser les résultats avec **matplotlib**

Le script principal `main.py` se veut un exemple pédagogique regroupant backtest, optimisation et analyse de performance.

---

## Fonctionnalités principales

1. **Récupération des données**  
   Téléchargement de l’historique OHLCV via ccxt, avec choix du symbole, du timeframe et de la période analysée.

2. **Calcul des indicateurs**  
   - EMA sur le prix d’ouverture (open)  
   - EMA sur le prix de clôture (close)  
   - Génération d’un signal d’achat/vente basé sur le croisement de ces deux EMAs  

3. **Backtest**  
   - simulation des positions (achat = 1, vente = -1)  
   - gestion du capital, des frais et des tailles de position  
   - comparaison de la performance à une stratégie **Buy & Hold**  

4. **Mesures de performance**  
   - Sharpe Ratio  
   - Sortino Ratio  
   - Max Drawdown  
   - Calmar Ratio  
   - retour total en pourcentage

5. **Algorithme génétique**  
   - recherche des périodes optimales pour les EMAs (entre `ema_min` et `ema_max`)  
   - sélection, croisement et mutation des individus  
   - itérations sur plusieurs générations pour maximiser un critère (par exemple le Sharpe Ratio)

6. **Validation croisée temporelle (Time-Series Split)**  
   - découpage des données en plusieurs segments successifs (folds)  
   - optimisation sur les premiers segments (train), test sur le suivant (validation)  
   - agrégation des résultats pour évaluer la **robustesse** de la stratégie  

7. **Visualisation**  
   - courbe de prix + EMAs  
   - signaux d’entrée et de sortie  
   - valeur du portefeuille au fil du temps  
   - comparaison Stratégie optimisée vs Buy & Hold  

---

## Installation et dépendances

Avant d’exécuter le script, installe les dépendances :

```bash
pip install ccxt pandas numpy matplotlib tqdm
```

- `ccxt` : récupération des données de marché sur Binance  
- `pandas`, `numpy` : manipulation et traitement des données  
- `matplotlib` : visualisation des résultats  
- `tqdm` : barre de progression pour les boucles

Le script est compatible avec **Python 3.9+**.

---

## Utilisation

1. Clone le dépôt ou télécharge le fichier `main.py`.  
2. Installe les dépendances indiquées ci-dessus.  
3. Exécute le script en ligne de commande :

```bash
python main.py
```

---

## Paramètres configurables

Les principaux paramètres sont définis au début du script :

- `FEE_RATE` — frais de transaction (par défaut `0.001`, soit 0,1 %)  
- `symbol` — symbole analysé, par défaut `"BTC/USDT"`  
- `timeframes` — liste de timeframes utilisés, par exemple `["1h", "30m", "15m"]`  
- `days_to_fetch` — nombre de jours d’historique à récupérer  
- `start_date_str` / `end_date_str` — période d’analyse  
- `initial_balance` — capital initial (ex. `1000.0`)  
- `k_folds` — nombre de segments pour la validation croisée  

Paramètres de l’algorithme génétique :

- `population_size` — taille de la population  
- `generations` — nombre de générations  
- `ema_min` / `ema_max` — bornes de recherche des périodes EMA  

---

## Structure du code

Le script `main.py` est organisé en grandes sections :

1. Configuration globale (paramètres, constantes)  
2. Récupération des données avec ccxt  
3. Calcul des indicateurs techniques et des signaux  
4. Fonction de backtest et calcul de la valeur du portefeuille  
5. Calcul des métriques de performance  
6. Implémentation de l’algorithme génétique  
7. Validation croisée temporelle (k-fold)  
8. Exécution principale et affichage des graphiques  

---

## Exemple d’exécution

Lorsqu’on lance le script, il :

1. télécharge les chandeliers historiques pour le symbole et les timeframes choisis,  
2. filtre les données sur la période souhaitée,  
3. applique la validation croisée et optimise les périodes des EMAs,  
4. effectue le backtest sur chaque fold,  
5. calcule et affiche les métriques de performance,  
6. trace les graphiques comparant la stratégie optimisée à un Buy & Hold.

---

## Avertissement

Ce projet est fourni à des **fins éducatives et expérimentales**.  
Il ne constitue **en aucun cas** une recommandation d’investissement.  
Les performances passées ne préjugent pas des performances futures.  
Faites toujours vos propres recherches et soyez conscient des risques avant de prendre une décision de trading.
